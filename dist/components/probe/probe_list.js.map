{"version":3,"sources":["../../../src/components/probe/probe_list.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAO,O;;;;;;;;;;;;;;;;;;;;;+BAED,a;;;;AAGJ,+BAAY,MAAZ,EAAoB,SAApB,EAA+B,SAA/B,EAA0C,OAA1C,EAAmD,UAAnD,EAA+D,UAA/D,EAA2E;AAAA;;AACzE,eAAK,UAAL,GAAkB,WAAW,OAAX,CAAmB,OAAnB,CAAlB;AACA,eAAK,UAAL,GAAkB,UAAlB;AACA,eAAK,OAAL,GAAe,OAAf;AACA,eAAK,SAAL,GAAiB,SAAjB;AACA,eAAK,SAAL,GAAiB,KAAjB;AACA,eAAK,QAAL,GAAgB,CACd,EAAC,OAAO,QAAR,EAAkB,OAAO,EAAC,QAAQ,IAAT,EAAe,SAAS,IAAxB,EAAzB,EAAwD,IAAI,CAA5D,EADc,EAEd,EAAC,OAAO,SAAR,EAAmB,OAAO,EAAC,QAAQ,KAAT,EAAgB,SAAS,IAAzB,EAA1B,EAA0D,IAAI,CAA9D,EAFc,EAGd,EAAC,OAAO,UAAR,EAAoB,OAAO,EAAC,SAAS,KAAV,EAA3B,EAA6C,IAAI,CAAjD,EAHc,CAAhB;;AAMA,eAAK,MAAL,GAAc,EAAC,KAAK,EAAN,EAAU,QAAQ,EAAlB,EAAd;AACA,eAAK,UAAL,GAAkB,MAAlB;AACA,eAAK,UAAL,GAAkB,EAAlB;AACA,eAAK,aAAL;AACD;;;;0CAEe;AACd,gBAAI,MAAM,EAAV;AACA,cAAE,OAAF,CAAU,KAAK,UAAf,EAA2B,UAAS,SAAT,EAAoB;AAC7C,gBAAE,OAAF,CAAU,UAAU,IAApB,EAA0B,UAAS,GAAT,EAAc;AACtC,oBAAI,GAAJ,IAAW,IAAX;AACD,eAFD;AAGD,aAJD;AAKA,mBAAO,OAAO,IAAP,CAAY,GAAZ,CAAP;AACD;;;6CAEkB,G,EAAK;AACtB,iBAAK,MAAL,CAAY,GAAZ,GAAkB,GAAlB;AACD;;;yCAEc;AACb,gBAAI,OAAO,IAAX;AACA,mBAAO,UAAS,MAAT,EAAiB;AACtB,kBAAI,CAAC,KAAK,MAAL,CAAY,MAAjB,EAAyB;AACvB,uBAAO,IAAP;AACD;AACD,kBAAI,MAAM,KAAK,OAAL,CAAa,QAAb,EAAuB,CAAC,MAAD,CAAvB,EAAiC,KAAK,MAAL,CAAY,MAA7C,CAAV;AACA,qBAAO,IAAI,MAAJ,GAAa,CAApB;AACD,aAND;AAOD;;;0CAEe;AACd,gBAAI,OAAO,IAAX;AACA,iBAAK,UAAL,CAAgB,GAAhB,CAAoB,wDAApB,EAA8E,IAA9E,CAAmF,UAAS,UAAT,EAAqB;AACtG,mBAAK,SAAL,GAAiB,IAAjB;AACA,mBAAK,UAAL,GAAkB,UAAlB;AACD,aAHD;AAID;;;iCAEM,G,EAAK;AACV,gBAAI,OAAO,IAAX;AACA,iBAAK,UAAL,CAAgB,MAAhB,CAAuB,4DAA4D,IAAI,EAAvF,EAA2F,IAA3F,CAAgG,YAAW;AACzG,mBAAK,aAAL;AACD,aAFD;AAGD;;;wCAEa,S,EAAW;AACvB,iBAAK,SAAL,CAAe,IAAf,CAAoB,2CAApB,EAAiE,MAAjE,CAAwE,EAAC,iBAAiB,UAAU,IAA5B,EAAkC,gBAAgB,KAAlD,EAAxE;AACD;;;;;;AAGH,oBAAc,WAAd,GAA4B,iFAA5B;;+BACQ,a","file":"probe_list.js","sourcesContent":["import _ from 'lodash';\n\nclass ProbeListCtrl {\n\n  /** @ngInject */\n  constructor($scope, $injector, $location, $filter, backendSrv, contextSrv) {\n    this.isOrgAdmin = contextSrv.hasRole('Admin');\n    this.backendSrv = backendSrv;\n    this.$filter = $filter;\n    this.$location = $location;\n    this.pageReady = false;\n    this.statuses = [\n      {label: \"Online\", value: {online: true, enabled: true}, id: 2},\n      {label: \"Offline\", value: {online: false, enabled: true}, id: 3},\n      {label: \"Disabled\", value: {enabled: false}, id: 4},\n    ];\n\n    this.filter = {tag: \"\", status: \"\"};\n    this.sort_field = \"name\";\n    this.collectors = [];\n    this.getCollectors();\n  }\n\n  collectorTags() {\n    var map = {};\n    _.forEach(this.collectors, function(collector) {\n      _.forEach(collector.tags, function(tag) {\n        map[tag] = true;\n      });\n    });\n    return Object.keys(map);\n  }\n\n  setCollectorFilter(tag) {\n    this.filter.tag = tag;\n  }\n\n  statusFilter() {\n    var self = this;\n    return function(actual) {\n      if (!self.filter.status) {\n        return true;\n      }\n      var res = self.$filter('filter')([actual], self.filter.status);\n      return res.length > 0;\n    };\n  }\n\n  getCollectors() {\n    var self = this;\n    this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/collectors').then(function(collectors) {\n      self.pageReady = true;\n      self.collectors = collectors;\n    });\n  }\n\n  remove(loc) {\n    var self = this;\n    this.backendSrv.delete('api/plugin-proxy/raintank-worldping-app/api/collectors/' + loc.id).then(function() {\n      self.getCollectors();\n    });\n  }\n\n  gotoDashboard(collector) {\n    this.$location.path(\"/dashboard/db/worldping-collector-summary\").search({\"var-collector\": collector.slug, \"var-endpoint\": \"All\"});\n  }\n}\n\nProbeListCtrl.templateUrl = 'public/plugins/raintank-worldping-app/components/probe/partials/probe_list.html';\nexport {ProbeListCtrl};\n"]}