{"version":3,"sources":["../../../src/components/probe/probe_list.js"],"names":[],"mappings":";;;;;;;;;;;;;AAAO;;;;;;;;;;;;;;;;;;;;;+BAED;;;AAEJ,iBAFI,aAEJ,CAAY,MAAZ,EAAoB,SAApB,EAA+B,SAA/B,EAA0C,OAA1C,EAAmD,UAAnD,EAA+D;gCAF3D,eAE2D;;AAC7D,eAAK,UAAL,GAAkB,UAAlB,CAD6D;AAE7D,eAAK,OAAL,GAAe,OAAf,CAF6D;AAG7D,eAAK,SAAL,GAAiB,SAAjB,CAH6D;AAI7D,eAAK,SAAL,GAAiB,KAAjB,CAJ6D;AAK7D,eAAK,QAAL,GAAgB,CACd,EAAC,OAAO,QAAP,EAAiB,OAAO,EAAC,QAAQ,IAAR,EAAc,SAAS,IAAT,EAAtB,EAAsC,IAAI,CAAJ,EAD1C,EAEd,EAAC,OAAO,SAAP,EAAkB,OAAO,EAAC,QAAQ,KAAR,EAAe,SAAS,IAAT,EAAvB,EAAuC,IAAI,CAAJ,EAF5C,EAGd,EAAC,OAAO,UAAP,EAAmB,OAAO,EAAC,SAAS,KAAT,EAAR,EAAyB,IAAI,CAAJ,EAH/B,CAAhB,CAL6D;;AAW7D,eAAK,MAAL,GAAc,EAAC,KAAK,EAAL,EAAS,QAAQ,EAAR,EAAxB,CAX6D;AAY7D,eAAK,UAAL,GAAkB,MAAlB,CAZ6D;AAa7D,eAAK,UAAL,GAAkB,EAAlB,CAb6D;AAc7D,eAAK,aAAL,GAd6D;SAA/D;;qBAFI;;0CAmBY;AACd,gBAAI,OAAO,IAAP,CADU;AAEd,gBAAI,MAAM,EAAN,CAFU;AAGd,cAAE,OAAF,CAAU,KAAK,UAAL,EAAiB,UAAS,SAAT,EAAoB;AAC7C,gBAAE,OAAF,CAAU,UAAU,IAAV,EAAgB,UAAS,GAAT,EAAc;AACtC,oBAAI,GAAJ,IAAW,IAAX,CADsC;eAAd,CAA1B,CAD6C;aAApB,CAA3B,CAHc;AAQd,mBAAO,OAAO,IAAP,CAAY,GAAZ,CAAP,CARc;;;;6CAWG,KAAK;AACtB,iBAAK,MAAL,CAAY,GAAZ,GAAkB,GAAlB,CADsB;;;;yCAIT;AACb,gBAAI,OAAO,IAAP,CADS;AAEb,mBAAO,UAAS,MAAT,EAAiB;AACtB,kBAAI,CAAC,KAAK,MAAL,CAAY,MAAZ,EAAoB;AACvB,uBAAO,IAAP,CADuB;eAAzB;AAGA,kBAAI,MAAM,KAAK,OAAL,CAAa,QAAb,EAAuB,CAAC,MAAD,CAAvB,EAAiC,KAAK,MAAL,CAAY,MAAZ,CAAvC,CAJkB;AAKtB,qBAAO,IAAI,MAAJ,GAAa,CAAb,CALe;aAAjB,CAFM;;;;0CAWC;AACd,gBAAI,OAAO,IAAP,CADU;AAEd,iBAAK,UAAL,CAAgB,GAAhB,CAAoB,wDAApB,EAA8E,IAA9E,CAAmF,UAAS,UAAT,EAAqB;AACtG,mBAAK,SAAL,GAAiB,IAAjB,CADsG;AAEtG,mBAAK,UAAL,GAAkB,UAAlB,CAFsG;aAArB,CAAnF,CAFc;;;;iCAQT,KAAK;AACV,gBAAI,OAAO,IAAP,CADM;AAEV,iBAAK,UAAL,CAAgB,MAAhB,CAAuB,4DAA4D,IAAI,EAAJ,CAAnF,CAA2F,IAA3F,CAAgG,YAAW;AACzG,mBAAK,aAAL,GADyG;aAAX,CAAhG,CAFU;;;;wCAOE,WAAW;AACvB,iBAAK,SAAL,CAAe,IAAf,CAAoB,2CAApB,EAAiE,MAAjE,CAAwE,EAAC,iBAAiB,UAAU,IAAV,EAAgB,gBAAgB,KAAhB,EAA1G,EADuB;;;;eA5DrB;;;AAkEN,oBAAc,WAAd,GAA4B,iFAA5B;;+BAEQ","file":"probe_list.js","sourcesContent":["import _ from 'lodash';\n\nclass ProbeListCtrl {\n /** @ngInject */\n  constructor($scope, $injector, $location, $filter, backendSrv) {\n    this.backendSrv = backendSrv;\n    this.$filter = $filter;\n    this.$location = $location;\n    this.pageReady = false;\n    this.statuses = [\n      {label: \"Online\", value: {online: true, enabled: true}, id: 2},\n      {label: \"Offline\", value: {online: false, enabled: true}, id: 3},\n      {label: \"Disabled\", value: {enabled: false}, id: 4},\n    ];\n\n    this.filter = {tag: \"\", status: \"\"};\n    this.sort_field = \"name\";\n    this.collectors = [];\n    this.getCollectors();\n  }\n\n  collectorTags() {\n    var self = this;\n    var map = {};\n    _.forEach(this.collectors, function(collector) {\n      _.forEach(collector.tags, function(tag) {\n        map[tag] = true;\n      });\n    });\n    return Object.keys(map);\n  }\n\n  setCollectorFilter(tag) {\n    this.filter.tag = tag;\n  }\n\n  statusFilter() {\n    var self = this;\n    return function(actual) {\n      if (!self.filter.status) {\n        return true;\n      }\n      var res = self.$filter('filter')([actual], self.filter.status);\n      return res.length > 0;\n    }\n  }\n\n  getCollectors() {\n    var self = this;\n    this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/collectors').then(function(collectors) {\n      self.pageReady = true;\n      self.collectors = collectors;\n    });\n  };\n\n  remove(loc) {\n    var self = this;\n    this.backendSrv.delete('api/plugin-proxy/raintank-worldping-app/api/collectors/' + loc.id).then(function() {\n      self.getCollectors();\n    });\n  };\n\n  gotoDashboard(collector) {\n    this.$location.path(\"/dashboard/db/worldping-collector-summary\").search({\"var-collector\": collector.slug, \"var-endpoint\": \"All\"});\n  };\n  \n}\n\nProbeListCtrl.templateUrl = 'public/plugins/raintank-worldping-app/components/probe/partials/probe_list.html'\n\nexport {ProbeListCtrl}"]}