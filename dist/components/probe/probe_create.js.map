{"version":3,"sources":["../../../src/components/probe/probe_create.js"],"names":[],"mappings":";;;;;;;;;;;;;AAAO;;;;;;;;;;;;;;;;;;;;;AAEH,iBAAW;AACb,cAAM,EAAN;AACA,iBAAS,IAAT;;;iCAGI;;;AAEJ,iBAFI,eAEJ,CAAY,MAAZ,EAAoB,SAApB,EAA+B,SAA/B,EAA0C,QAA1C,EAAoD,UAApD,EAAgE;gCAF5D,iBAE4D;;AAC9D,cAAI,OAAO,IAAP,CAD0D;AAE9D,eAAK,UAAL,GAAkB,UAAlB,CAF8D;AAG9D,eAAK,SAAL,GAAiB,SAAjB,CAH8D;AAI9D,eAAK,QAAL,GAAgB,QAAhB,CAJ8D;;AAM9D,eAAK,MAAL,GAAc,EAAd,CAN8D;;AAQ9D,eAAK,SAAL,GAAiB,QAAQ,IAAR,CAAa,QAAb,CAAjB,CAR8D;;AAU9D,cAAI,WAAW,UAAU,MAAV,EAAX,EAA+B;AACjC,iBAAK,YAAL,CAAkB,UAAU,MAAV,GAAmB,KAAnB,CAAlB,CADiC;WAAnC,MAEO;AACL,iBAAK,KAAL,GADK;WAFP;SAVF;;qBAFI;;uCAmBS,IAAI;AACf,gBAAI,OAAO,IAAP,CADW;AAEf,mBAAO,KAAK,UAAL,CAAgB,GAAhB,CAAoB,mDAAiD,EAAjD,CAApB,CAAyE,IAAzE,CAA8E,UAAS,SAAT,EAAoB;AACvG,mBAAK,SAAL,GAAiB,SAAjB,CADuG;aAApB,CAArF,CAFe;;;;kCAOT;AACN,iBAAK,SAAL,GAAiB,QAAQ,IAAR,CAAa,QAAb,CAAjB,CADM;;;;iCAID;AACL,mBAAO,KAAK,UAAL,CAAgB,IAAhB,CAAqB,+CAArB,EAAsE,KAAK,SAAL,CAA7E,CADK;;;;gCAID;AACJ,gBAAI,OAAO,IAAP,CADA;AAEJ,iBAAK,UAAL,CAAgB,GAAhB,CAAoB,+CAApB,EAAqE,KAAK,SAAL,CAArE,CACG,IADH,CACQ,UAAS,IAAT,EAAe;AACnB,mBAAK,SAAL,GAAiB,IAAjB,CADmB;aAAf,CADR,CAFI;;;;uCAQO;AACX,iBAAK,cAAL,GAAsB,IAAtB,CADW;;;;0CAIG;AACd,iBAAK,gBAAL,GAAwB,KAAxB,CADc;;;;wCAIF;AACZ,iBAAK,gBAAL,GAAwB,IAAxB,CADY;;;;mCAIL;AACP,gBAAI,OAAO,IAAP,CADG;AAEP,gBAAI,QAAQ;AACV,oBAAM,QAAN;AACA,oBAAM,eAAe,OAAO,SAAP,CAAiB,IAAjB;aAFnB,CAFG;AAMP,iBAAK,UAAL,CAAgB,IAAhB,CAAqB,8CAArB,EAAqE,KAArE,EAA4E,IAA5E,CAAiF,UAAS,MAAT,EAAiB;AAChG,mBAAK,MAAL,GAAc,OAAO,GAAP,CADkF;AAEhG,mBAAK,UAAL,GAAkB,IAAlB,CAFgG;aAAjB,CAAjF,CANO;;;;eAtDL;;;AAmEN,sBAAgB,WAAhB,GAA8B,0EAA9B;;iCAEQ","file":"probe_create.js","sourcesContent":["import _ from 'lodash';\n\nvar defaults = {\n  name: '',\n  enabled: true,\n};\n\nclass ProbeCreateCtrl {\n /** @ngInject */\n  constructor($scope, $injector, $location, $timeout, backendSrv) {\n    var self = this;\n    this.backendSrv = backendSrv;\n    this.$location = $location;\n    this.$timeout = $timeout;\n\n    this.apiKey = \"\";\n\n    this.collector = angular.copy(defaults);\n\n    if (\"probe\" in $location.search()) {\n      self.getCollector($location.search().probe);\n    } else {\n      self.reset();\n    }\n  }\n\n  getCollector(id) {\n    var self = this;\n    return this.backendSrv.get('api/plugin-proxy/worldping-app/api/collectors/'+id).then(function(collector) {\n      self.collector = collector;\n    });\n  }\n\n  reset() {\n    this.collector = angular.copy(defaults);\n  }\n\n  save() {\n    return this.backendSrv.post('api/plugin-proxy/worldping-app/api/collectors', this.collector);\n  };\n\n  add() {\n    var self = this;\n    this.backendSrv.put('api/plugin-proxy/worldping-app/api/collectors', this.collector)\n      .then(function(resp) {\n        self.collector = resp;\n      });\n  };\n\n  configInfo() {\n    this.showConfigInfo = true;\n  };\n\n  defaultDistro() {\n    this.showDistroConfig = false;\n  }\n\n  otherDistro() {\n    this.showDistroConfig = true;\n  }\n\n  apiKey() {\n    var self = this;\n    var token = {\n      role: 'Editor',\n      name: \"collector:\" + $scope.collector.name\n    };\n    this.backendSrv.post('api/plugin-proxy/worldping-app/api/auth/keys', token).then(function(result) {\n      self.apiKey = result.key;\n      self.showApiKey = true;\n    });\n  };\n}\n\nProbeCreateCtrl.templateUrl = 'public/plugins/worldping-app/components/probe/partials/probe_create.html'\n\nexport {ProbeCreateCtrl}\n\n"]}