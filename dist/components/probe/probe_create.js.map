{"version":3,"sources":["../../../src/components/probe/probe_create.js"],"names":[],"mappings":";;;;;;;;;;;;;AAAO,a;;;;;;;;;;;;;;;;;;;;;AAEH,c,GAAW;AACb,cAAM,EADO;AAEb,iBAAS;AAFI,O;;iCAKT,e;;;;AAGJ,iCAAY,MAAZ,EAAoB,SAApB,EAA+B,SAA/B,EAA0C,QAA1C,EAAoD,UAApD,EAAgE;AAAA;;AAC9D,cAAI,OAAO,IAAX;AACA,eAAK,UAAL,GAAkB,UAAlB;AACA,eAAK,SAAL,GAAiB,SAAjB;AACA,eAAK,QAAL,GAAgB,QAAhB;AACA,eAAK,YAAL,GAAoB,KAApB;AACA,eAAK,MAAL,GAAc,EAAd;;AAEA,eAAK,SAAL,GAAiB,QAAQ,IAAR,CAAa,QAAb,CAAjB;;AAEA,cAAI,WAAW,UAAU,MAAV,EAAf,EAAmC;AACjC,iBAAK,YAAL,CAAkB,UAAU,MAAV,GAAmB,KAArC;AACD,WAFD,MAEO;AACL,iBAAK,KAAL;AACD;AACF;;;;uCAEY,E,EAAI;AACf,gBAAI,OAAO,IAAX;AACA,mBAAO,KAAK,UAAL,CAAgB,GAAhB,CAAoB,4DAA0D,EAA9E,EAAkF,IAAlF,CAAuF,UAAS,SAAT,EAAoB;AAChH,mBAAK,SAAL,GAAiB,SAAjB;AACD,aAFM,CAAP;AAGD;;;kCAEO;AACN,iBAAK,SAAL,GAAiB,QAAQ,IAAR,CAAa,QAAb,CAAjB;AACD;;;iCAEM;AACL,mBAAO,KAAK,UAAL,CAAgB,IAAhB,CAAqB,wDAArB,EAA+E,KAAK,SAApF,CAAP;AACD;;;gCAEK;AACJ,gBAAI,OAAO,IAAX;AACA,iBAAK,UAAL,CAAgB,GAAhB,CAAoB,wDAApB,EAA8E,KAAK,SAAnF,EACG,IADH,CACQ,UAAS,IAAT,EAAe;AACnB,mBAAK,SAAL,GAAiB,IAAjB;AACA,mBAAK,YAAL,GAAoB,IAApB;AACD,aAJH;AAKD;;;uCAEY;AACX,iBAAK,cAAL,GAAsB,IAAtB;AACD;;;0CAEe;AACd,iBAAK,gBAAL,GAAwB,KAAxB;AACD;;;wCAEa;AACZ,iBAAK,gBAAL,GAAwB,IAAxB;AACD;;;mCAEQ;AACP,gBAAI,OAAO,IAAX;AACA,gBAAI,QAAQ;AACV,oBAAM,QADI;AAEV,oBAAM,eAAe,KAAK,SAAL,CAAe;AAF1B,aAAZ;;AAKA,iBAAK,UAAL,CAAgB,IAAhB,CAAqB,uDAArB,EAA8E,KAA9E,EAAqF,IAArF,CAA0F,UAAS,MAAT,EAAiB;AACzG,mBAAK,MAAL,GAAc,OAAO,GAArB;AACA,mBAAK,UAAL,GAAkB,IAAlB;AACD,aAHD;AAID;;;;;;AAGH,sBAAgB,WAAhB,GAA8B,mFAA9B;;iCAEE,e","file":"probe_create.js","sourcesContent":["import angular from 'angular';\n\nvar defaults = {\n  name: '',\n  enabled: true,\n};\n\nclass ProbeCreateCtrl {\n\n  /** @ngInject */\n  constructor($scope, $injector, $location, $timeout, backendSrv) {\n    var self = this;\n    this.backendSrv = backendSrv;\n    this.$location = $location;\n    this.$timeout = $timeout;\n    this.newCollector = false;\n    this.apiKey = \"\";\n\n    this.collector = angular.copy(defaults);\n\n    if (\"probe\" in $location.search()) {\n      self.getCollector($location.search().probe);\n    } else {\n      self.reset();\n    }\n  }\n\n  getCollector(id) {\n    var self = this;\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/collectors/'+id).then(function(collector) {\n      self.collector = collector;\n    });\n  }\n\n  reset() {\n    this.collector = angular.copy(defaults);\n  }\n\n  save() {\n    return this.backendSrv.post('api/plugin-proxy/raintank-worldping-app/api/collectors', this.collector);\n  }\n\n  add() {\n    var self = this;\n    this.backendSrv.put('api/plugin-proxy/raintank-worldping-app/api/collectors', this.collector)\n      .then(function(resp) {\n        self.collector = resp;\n        self.newCollector = true;\n      });\n  }\n\n  configInfo() {\n    this.showConfigInfo = true;\n  }\n\n  defaultDistro() {\n    this.showDistroConfig = false;\n  }\n\n  otherDistro() {\n    this.showDistroConfig = true;\n  }\n\n  apiKey() {\n    var self = this;\n    var token = {\n      role: 'Editor',\n      name: \"collector:\" + this.collector.name\n    };\n\n    this.backendSrv.post('api/plugin-proxy/raintank-worldping-app/api/auth/keys', token).then(function(result) {\n      self.apiKey = result.key;\n      self.showApiKey = true;\n    });\n  }\n}\n\nProbeCreateCtrl.templateUrl = 'public/plugins/raintank-worldping-app/components/probe/partials/probe_create.html';\nexport {\n  ProbeCreateCtrl\n};\n\n"]}