<div class="page-header">
	<h1 class="rt-h1">Endpoints</h1>
	<a class="btn btn-success" href="plugins/raintank-worldping-app/page/endpoint-config">
		<i class="fa fa-plus"></i>
		New Endpoint
	</a>
</div>

<div ng-if="!ctrl.pageReady" class="rt-loading-message-container">
	<div class="rt-loading-message-inside">
		<img class="rt-loading-pulse" src="public/plugins/raintank-worldping-app/img/loading-pulse.svg" style="margin-bottom: 10px;">
		<p class="rt-loading-msg-1">To infinity...and beyond.</p>
		<p class="rt-loading-msg-2">This is taking longer than expected.</p>
		<p class="rt-loading-msg-3">We apologize, something may be up. Please try refreshing first, and contact us if this continues to happen.</p>
	</div>
</div>

<div ng-if="ctrl.pageReady">
	<div ng-if="ctrl.endpoints.length === 0" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-start; height: 350px;">
		<div style="text-align: center; padding-top: 90px; min-height: 220px; min-width: 400px;  margin: 0 auto;">
			<i ng-class="icon" class="icon-gf icon-gf-endpoint no-endpoints"></i>
			<p>Looks like you donâ€™t have any endpoints yet. <a class="highlight-word" href="plugins/raintank-worldping-app/page/endpoint-config">Add an endpoint now.</a></p>
		</div>
		<div class="rt-collapse-container">
			<label class="rt-collapse rt-collapse-secondary" for="_1">What's an endpoint? <i class="fa fa-caret-down"></i></label>
			<input id="_1" type="checkbox">
			<div class="rt-collapse-blurb-box">
				<p class="rt-helper-blurb">In worldPing, an endpoint is anything you want to monitor.</p>
				<p class="rt-helper-blurb">When you enter the fully qualified domain name of your endpoint, we will automatically detect what is available to monitor (eg. PING, HTTP, HTTPS) and suggest a customizable set of defaults unique to your endpoint.</p>
			</div>
		</div>
	</div>
	<div ng-if="ctrl.endpoints.length > 0">
        <div class="gf-form">
          <span class="gf-form-label width-6">Filter by:</span>
          <div class="gf-form-select-wrapper">
            <select class="gf-form-input gf-size-auto" ng-model="ctrl.filter.tag" ng-options="t for t in ctrl.endpointTags()"><option value="">All Tags</option></select>
          </div>
        </div>
		<div class="rt-list-showing-header">
			<div class="rt-list-status">
				<span class="small">Showing {{(ctrl.endpoints | filterByTag:ctrl.filter.tag).length}}</span>
				<span class="small"> of <span class="rt-list-links" ng-click="setTagFilter('')">{{ctrl.endpoints.length}} total</a></span>
			</div>
			<div class="editor-option" style="float: right;">
<!-- 					<span class="small">Sorted By:</span>
				<div class="select-input">
					<select ng-model="sort_field" ng-options="field for field in ['name']"></select>
				</div> -->
			</div>
		</div>
	</div>
</div>

	<section ng-if="ctrl.endpoints.length > 0" class="card-section" layout-mode>
    <layout-selector></layout-selector>

		<ol class="card-list" >
			<li class="card-item-wrapper" ng-repeat="endpoint in ctrl.endpoints | filterByTag:ctrl.filter.tag | orderBy:ctrl.sort_field">
				<a class="card-item" href="plugins/raintank-worldping-app/page/endpoint-details?endpoint={{endpoint.id}}">
					<div class="card-item-header">
						<i class="icon-gf icon-gf-{{ds.type}}"></i>
						<rt-endpoint-health endpoint="endpoint" ctrl="ctrl"></rt-endpoint-health>
					</div>
					<div class="card-item-body">
						<div class="card-item-details">
							<div class="card-item-name">
								{{endpoint.name}}
								<span ng-repeat="tag in endpoint.tags" tag-color-from-name="tag"  class="label label-tag">
									{{tag}}
								</span>
								<span ng-if="ds.isDefault">
									<span class="btn btn-secondary btn-mini">default</span>
								</span>
							</div>
						</div>
					</div>
				</a>
			</li>
		</ol>
	</section>
<!--
<div ng-if="ctrl.pageReady">
	<div ng-if="ctrl.endpoints.length > 0" style="margin: 15px; position: relative; display: block; max-width: 1000px;">
		<div class="rt-list" ng-repeat="endpoint in ctrl.endpoints | filterByTag:ctrl.filter.tag | orderBy:ctrl.sort_field">
			<div class="rt-list-header rt-page-box-header" style="overflow: visible; padding:5px;" ng-click="ctrl.gotoEndpointURL(endpoint)">
				<span class="rt-list-item-title"><a href="plugins/raintank-worldping-app/page/endpoint-details?endpoint={{endpoint.id}}">{{endpoint.name}}</a></span>

				<div style="display: inline-block;">
					<span class="label rt-label-tag dropdown rt-list-tag-menu" ng-repeat="tag in endpoint.tags" tag-color-from-name="tag">
						<a data-toggle="dropdown">{{tag}} <i ng-class="icon" class="tag-icon icon-rt-endpoint-tiny"></i></a>
						<ul class="dropdown-menu rt-tag-dropup">
							<li>
								<a href="#" bs-tooltip="'Coming Soon'">
									<i ng-class="icon" class="icon-gf icon-gf-dashboard"></i>
									Dashboard
								</a>
							</li>
							<li>
								<a ng-click="ctrl.setTagFilter(tag)">
									<i ng-class="icon" class="dashboard-icon icon-rt-filter"></i>
									Filter
								</a>
							</li>
						</ul>
					</span>
				</div>
	 				<div style="float: right;">
					<div style="display: inline;">
						<rt-endpoint-health endpoint="endpoint" ctrl="ctrl"></rt-endpoint-health>
					</div>
					<div style="display: inline; margin-left:25px;">
						<a ng-click="ctrl.gotoDashboard(endpoint)"><i ng-class="icon" class="primary-icon icon-gf icon-gf-dashboard" bs-tooltip="'Go to worldPing: Endpoint Summary</br> dashboard for {{endpoint.name}}'"></i></a>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</div> -->