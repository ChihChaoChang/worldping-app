{"version":3,"sources":["../../../src/components/endpoint/endpoint_config.js"],"names":[],"mappings":"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","file":"endpoint_config.js","sourcesContent":["import _ from 'lodash';\nimport angular from 'angular';\n\nclass EndpointConfigCtrl {\n   /** @ngInject */\n  constructor($scope, $injector, $rootScope, $location, $modal, $anchorScroll, $timeout, $window, backendSrv, alertSrv) {\n    var self = this;\n    this.backendSrv = backendSrv;\n    this.$location = $location;\n    this.$timeout = $timeout;\n    this.alertSrv = alertSrv;\n    this.pageReady = false;\n    this.showCreating = false;\n    this.monitorLastState = {};\n    self.insufficientQuota = false;\n\n    this.frequencyOpts = [];\n    var freqOpt = [10, 30, 60, 120];\n    _.forEach(freqOpt, function(f) {\n      self.frequencyOpts.push({value: f, label: \"Every \"+f+\"s\"});\n    });\n\n    this.timeoutRegex = /^([1-9](\\.\\d)?|10)$/;\n    this.editor = {index: 0};\n    this.newEndpointName = \"\";\n    this.endpoint = {};\n    this.monitors = {};\n    this.monitor_types = {};\n    this.monitor_types_by_name = {};\n    this.allCollectors = [];\n    this.collectorsOption = {selection: \"all\"};\n    this.collectorsByTag = {};\n    this.global_collectors = {collector_ids: [], collector_tags: []};\n    this.ignoreChanges = false;\n    this.originalState = {};\n\n    var promises = [];\n    var typesPromise = this.getMonitorTypes();\n    promises.push(typesPromise);\n    if (\"endpoint\" in $location.search()) {\n      promises.push(typesPromise.then(function() {\n        return self.getEndpoint($location.search().endpoint);\n      }));\n    } else {\n      // make sure we have sufficient quota.\n      promises.push(self.checkQuota());\n      console.log($location.search());\n      this.endpoint = {name: \"\"};\n    }\n\n    this.checks = {};\n\n    promises.push(this.getCollectors());\n    Promise.all(promises).then(function() {\n      self.pageReady = true;\n      self.reset();\n      $timeout(function() {\n        $anchorScroll();\n      }, 0, false);\n      $scope.$apply();\n    }, function(err) {\n      console.log(\"endpoint config init failed.\", err);\n    });\n\n    if ($location.search().check) {\n      switch($location.search().check) {\n      case \"ping\":\n        self.showPing = true;\n        break;\n      case \"dns\":\n        self.showDNS = true;\n        break;\n      case \"http\":\n        self.showHTTP = true;\n        break;\n      case \"https\":\n        self.showHTTPS = true;\n        break;\n      }\n    }\n\n    $window.onbeforeunload = function() {\n      if (self.ignoreChanges) { return; }\n      if (self.changesPending()) {\n        return \"There are unsaved changes to this dashboard\";\n      }\n    };\n\n    $scope.$on('$locationChangeStart', function(event, next) {\n      if ((!self.ignoreChanges) && (self.changesPending())) {\n        event.preventDefault();\n        var baseLen = $location.absUrl().length - $location.url().length;\n        var nextUrl = next.substring(baseLen);\n        var modalScope = $scope.$new();\n        modalScope.ignore = function() {\n          self.ignoreChanges = true;\n          $location.url(nextUrl);\n          return;\n        };\n\n        modalScope.save = function() {\n          self.save(nextUrl);\n        };\n\n        $rootScope.appEvent('show-modal', {\n          src: 'public/app/partials/unsaved-changes.html',\n          modalClass: 'confirm-modal',\n          scope: modalScope,\n        });\n      }\n    });\n  }\n\n  checkQuota() {\n    var self = this;\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/org/quotas').then((quotas) => {\n      _.forEach(quotas, function(q) {\n        if (q.target === \"endpoint\") {\n          if (q.used >= q.limit) {\n            self.insufficientQuota = true;\n          }\n        }\n      });\n      if (self.insufficientQuota) {\n        console.log(\"quota reached\");\n        return Promise.reject(\"Quota reached.\");\n      }\n      return true;\n    });\n  }\n\n  getCollectors() {\n    var self = this;\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/collectors').then(function(collectors) {\n      self.collectors = collectors;\n      _.forEach(collectors, function(c) {\n        self.allCollectors.push(c.id);\n        _.forEach(c.tags, function(t) {\n          if (!(t in self.collectorsByTag)) {\n            self.collectorsByTag[t] = [];\n          }\n          self.collectorsByTag[t].push(c);\n        });\n      });\n      self.global_collectors = {collector_ids: self.allCollectors, collector_tags: []};\n    });\n  }\n\n  collectorCount(monitor) {\n    var self = this;\n    if (!monitor) {\n      return 0;\n    }\n    var ids = {};\n    _.forEach(monitor.collector_ids, function(id) {\n      ids[id] = true;\n    });\n    _.forEach(monitor.collector_tags, function(t) {\n      _.forEach(self.collectorsByTag[t], function(c) {\n        ids[c.id] = true;\n      });\n    });\n    return Object.keys(ids).length;\n  }\n\n  getMonitorTypes() {\n    var self = this;\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/monitor_types').then(function(types) {\n      var typesMap = {};\n      _.forEach(types, function(type) {\n        typesMap[type.id] = type;\n        self.monitor_types_by_name[type.name.toLowerCase()] = type;\n        self.setDefaultMonitor(type);\n      });\n      self.monitor_types = typesMap;\n    });\n  }\n\n  setDefaultMonitor(type) {\n    var self = this;\n    if (!(type.name.toLowerCase() in this.monitors)) {\n      var settings = [];\n      _.forEach(type.settings, function(setting) {\n        var val = setting.default_value;\n        if (self.endpoint && (setting.variable === \"host\" || setting.variable === \"name\" || setting.variable === \"hostname\")) {\n          val = self.endpoint.name || \"\";\n        }\n        settings.push({variable: setting.variable, value: val});\n      });\n      self.monitors[type.name.toLowerCase()] = {\n        id: null,\n        endpoint_id: null,\n        monitor_type_id: type.id,\n        collector_ids: [],\n        collector_tags: [],\n        settings: settings,\n        enabled: false,\n        frequency: 10,\n        health_settings: {\n          steps: 3,\n          num_collectors: 3,\n          notifications: {\n            enabled: false,\n            addresses: \"\"\n          }\n        }\n      };\n      self.monitorLastState[type.name.toLowerCase()] = _.cloneDeep(self.monitors[type.name.toLowerCase()]);\n    }\n  }\n\n  defaultSettingByVariable(monitorType, variable) {\n    var s = null;\n    var type = this.monitor_types_by_name[monitorType];\n    _.forEach(type.settings, function(setting) {\n      if (setting.variable === variable) {\n        s = setting;\n      }\n    });\n    return s;\n  }\n\n  currentSettingByVariable(monitor, variable) {\n    var s = {\n      \"variable\": variable,\n      \"value\": null\n    };\n    var found = false;\n    _.forEach(monitor.settings, function(setting) {\n      if (found) {\n        return;\n      }\n      if (setting.variable === variable) {\n        s = setting;\n        found = true;\n      }\n    });\n    if (! found) {\n      monitor.settings.push(s);\n    }\n    var type = this.monitor_types[monitor.monitor_type_id];\n    if (s.value === null) {\n      _.forEach(type.settings, function(setting) {\n        if (setting.variable === variable) {\n          s.value = setting.default_value;\n        }\n      });\n    }\n    if (!found) {\n      this.monitorLastState[type.name.toLowerCase()].settings.push(_.cloneDeep(s));\n    }\n\n    return s;\n  }\n\n  reset() {\n    var self = this;\n    this.discovered = false;\n    this.discoveryInProgress = false;\n    this.discoveryError = false;\n    this.showConfig = false;\n    this.showCreating = false;\n    // $scope.endpoint.name = {\"name\": \"\"};\n    this.monitors = {};\n    _.forEach(self.monitor_types, function(type) {\n      self.setDefaultMonitor(type);\n    });\n  }\n\n  cancel() {\n    this.reset();\n    this.ignoreChanges = true;\n    window.history.back();\n  }\n\n  getEndpoint(idString) {\n    var self = this;\n    var id = parseInt(idString);\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/endpoints/'+id).then(function(endpoint) {\n      self.endpoint = endpoint;\n      self.newEndpointName = endpoint.name;\n      //get monitors for this endpoint.\n      self.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/monitors?endpoint_id='+id).then(function(monitors) {\n        _.forEach(monitors, function(monitor) {\n          var type = monitor.monitor_type_name.toLowerCase();\n          if (type in self.monitors) {\n            _.assign(self.monitors[type], monitor);\n          } else {\n            self.monitors[type] = monitor;\n          }\n          self.monitorLastState[type] = _.cloneDeep(monitor);\n        });\n        self.pageReady = true;\n      });\n    });\n  }\n\n  setEndpoint(id) {\n    this.$location.url('plugins/raintank-worldping-app/page/endpoint-config?endpoint='+id);\n  }\n\n  remove(endpoint) {\n    var self = this;\n    this.backendSrv.delete('api/plugin-proxy/raintank-worldping-app/api/endpoints/' + endpoint.id).then(function() {\n      self.$location.path('plugins/raintank-worldping-app/page/endpoints');\n    });\n  }\n\n  removeMonitor(mon) {\n    var self = this;\n    var type = this.monitor_types[mon.monitor_type_id];\n    this.backendSrv.delete('api/plugin-proxy/raintank-worldping-app/api/monitors/' + mon.id).then(function() {\n      self.setDefaultMonitor(type.name.toLowerCase());\n      delete self.monitorLastState[type.name.toLowerCase()];\n    });\n  }\n\n  updateEndpoint() {\n    this.endpoint.name = this.newEndpointName;\n    this.backendSrv.post('api/plugin-proxy/raintank-worldping-app/api/endpoints', this.endpoint);\n  }\n\n  tagsUpdated() {\n    this.backendSrv.post(\"api/plugin-proxy/raintank-worldping-app/api/endpoints\", this.endpoint);\n  }\n\n  save(location) {\n    var self = this;\n    var promises = [];\n    _.forEach(this.monitors, function(monitor) {\n      monitor.endpoint_id = self.endpoint.id;\n      var type = self.monitor_types[monitor.monitor_type_id];\n      if (monitor.id) {\n        if (!angular.equals(monitor, self.monitorLastState[type.name.toLowerCase()])) {\n          promises.push(self.updateMonitor(monitor));\n        }\n      } else if (monitor.enabled) {\n        promises.push(self.addMonitor(monitor));\n      }\n    });\n\n    promises.push(self.backendSrv.post('api/plugin-proxy/raintank-worldping-app/api/endpoints', self.endpoint));\n    Promise.all(promises).then(function() {\n      if (location) {\n        self.$location.path(location);\n      } else {\n        self.$location.path(\"plugins/raintank-worldping-app/page/endpoints\");\n      }\n    });\n  }\n\n  addMonitor(monitor) {\n    var self = this;\n    monitor.endpoint_id = this.endpoint.id;\n    return this.backendSrv.put('api/plugin-proxy/raintank-worldping-app/api/monitors', monitor, true).then(function(resp) {\n      _.defaults(monitor, resp);\n      var type = self.monitor_types[resp.monitor_type_id];\n      self.monitorLastState[type.name.toLowerCase()] = _.cloneDeep(monitor);\n      var action = \"disabled\";\n      if (monitor.enabled) {\n        action = \"enabled\";\n      }\n      var message = type.name.toLowerCase() + \" \" + action + \" successfully\";\n      self.alertSrv.set(message, '', 'success', 3000);\n    });\n  }\n\n  updateMonitor(monitor) {\n    var self = this;\n    if (!monitor.id) {\n      return this.addMonitor(monitor);\n    }\n\n    return this.backendSrv.post('api/plugin-proxy/raintank-worldping-app/api/monitors', monitor, true).then(function() {\n      var type = self.monitor_types[monitor.monitor_type_id];\n      var message = type.name.toLowerCase() + \" updated\";\n      if (self.monitorLastState[type.name.toLowerCase()].enabled !== monitor.enabled) {\n        var action = \"disabled\";\n        if (monitor.enabled) {\n          action = \"enabled\";\n        }\n        message = type.name.toLowerCase() + \" \" + action + \" successfully\";\n      }\n\n      self.monitorLastState[type.name.toLowerCase()] = _.cloneDeep(monitor);\n      self.alertSrv.set(message, '', 'success', 3000);\n    });\n  }\n\n  parseSuggestions(payload) {\n    var self = this;\n    var defaults = {\n      endpoint_id: 0,\n      monitor_type_id: 1,\n      collector_ids: this.global_collectors.collector_ids,\n      collector_tags: this.global_collectors.collector_tags,\n      settings: [],\n      enabled: true,\n      frequency: 60,\n      health_settings: {\n        steps: 3,\n        num_collectors: 3,\n        notifications: {\n          enabled: false,\n          addresses: \"\"\n        }\n      }\n    };\n    _.forEach(payload, function(suggestion) {\n      _.defaults(suggestion, defaults);\n      var type = self.monitor_types[suggestion.monitor_type_id];\n      if (type.name.indexOf(\"Ping\") === 0) {\n        suggestion.frequency = 10;\n      }\n      self.monitors[type.name.toLowerCase()] = suggestion;\n    });\n  }\n\n  skipDiscovery() {\n    this.discoveryInProgress = false;\n    this.showConfig = true;\n    this.discoveryError = false;\n  }\n\n  discover(endpoint) {\n    if (!endpoint.name){\n      return;\n    }\n    var self = this;\n    this.discoveryInProgress = true;\n    this.discoveryError = false;\n    this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/endpoints/discover', endpoint).then(function(resp) {\n      if (!self.showConfig) {\n        if (endpoint.name.indexOf(\"://\") > -1) {\n          //endpoint name is in the form scheme://domain\n          var parser = document.createElement('a');\n          parser.href = endpoint.name;\n          endpoint.name = parser.hostname;\n        }\n        self.showConfig = true;\n        self.discovered = true;\n        self.parseSuggestions(resp);\n      }\n    }, function() {\n      self.discoveryError = \"Failed to discover endpoint.\";\n    }).finally(function() {\n      self.discoveryInProgress = false;\n    });\n  }\n\n  addEndpoint() {\n    var self = this;\n    if (this.endpoint.id) {\n      return this.updateEndpoint();\n    }\n\n    var delay = 120;\n\n    var payload = this.endpoint;\n    payload.monitors = [];\n    _.forEach(this.monitors, function(monitor) {\n      monitor.endpoint_id = -1;\n      payload.monitors.push(monitor);\n      if (monitor.enabled && monitor.frequency < delay) {\n        delay = monitor.frequency;\n      }\n    });\n    this.backendSrv.put('api/plugin-proxy/raintank-worldping-app/api/endpoints', payload)\n    .then(function(resp) {\n      self.endpoint = resp;\n      self.ignoreChanges = true;\n      self.alertSrv.set(\"endpoint added\", '', 'success', 3000);\n      self.showCreating = true;\n      self.endpointReadyDelay = delay;\n      self.endpointReady = false;\n      return self.$timeout(delay * 1000);\n    })\n    .then(function() {\n      console.log(self.endpointReadyDelay);\n      self.endpointReady = true;\n    });\n  }\n\n  changesPending() {\n    var self = this;\n    var changes = false;\n    _.forEach(this.monitors, function(monitor) {\n      if (monitor.id === null) {\n        return;\n      }\n      var type = self.monitor_types[monitor.monitor_type_id];\n      if (!angular.equals(monitor, self.monitorLastState[type.name.toLowerCase()])) {\n        changes = true;\n      }\n    });\n\n    return changes;\n  }\n\n  gotoDashboard(endpoint, type) {\n    var self = this;\n    if (!type) {\n      type = 'summary';\n    }\n    var search = {\n      \"var-collector\": \"All\",\n      \"var-endpoint\": this.endpoint.slug\n    };\n    switch(type) {\n      case \"summary\":\n        self.$location.path(\"/dashboard/db/worldping-endpoint-summary\").search(search);\n        break;\n      case \"ping\":\n        self.$location.path(\"/dashboard/db/worldping-endpoint-ping\").search(search);\n        break;\n      case \"dns\":\n        self.$location.path(\"/dashboard/db/worldping-endpoint-dns\").search(search);\n        break;\n      case \"http\":\n        search['var-protocol'] = \"http\";\n        self.$location.path(\"/dashboard/db/worldping-endpoint-web\").search(search);\n        break;\n      case \"https\":\n        search['var-protocol'] = \"https\";\n        self.$location.path(\"/dashboard/db/worldping-endpoint-web\").search(search);\n        break;\n      default:\n        self.$location.path(\"/dashboard/db/worldping-endpoint-summary\").search(search);\n        break;\n    }\n  }\n}\n\nEndpointConfigCtrl.templateUrl = 'public/plugins/raintank-worldping-app/components/endpoint/partials/endpoint_config.html';\n\nexport {EndpointConfigCtrl};\n"]}